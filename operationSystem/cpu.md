# CPU
## 概念
- 内存层次体系
- 虚拟内存
- 程序计数器
- 寄存器

## 微架构
- 指令设置架构
	- 指令设置
		- 软件与硬件沟通
	- 指令设置架构
		- 定义了软件与硬件之间的契约
	- 架构的用途分类
		- 基于注册器，加载存储
			- 操作数显示定义
			- 内存只通过加载和存储指令访问
- 管道
    - 指令处理的6个步骤
	    - IF
	    - ID
	    - EXE
		    - Execute
	    - MEM
		    - Memory access
	    - WB
		    - Write Back
		    - 
	- 三种冒险
		- 结构危险
			- 资源冲突
		- 数据危险
	        - 数据依赖
			- 分类
				- 写后读
				- 读后写
				- 写后写
		- 控制危险
			- 项目流改变
			- 
- 使用指令级别的并行
	- OOO执行
	- 超标量机器和VLIW
	- 
- 使用线程级别并行
- SIMD
	- 在一个单周期内，一个单指令操作在许多数据元素上，使用很多独立的函数单元
	- 

## 现代CPU设计
- CPU前端
	- 从内存中取出和解码指令
	- 将准备好的指令送给后端
		- 为真实的指令执行做准备
	- 每个x86指令周期内，从L1 I-cache中取16个字节
		- 这个在两个线程之间共享
			- 所以每个线程在另外每个周期内获取16个字节
    - 管道的预解码和解码阶段
	    - 预解码通过检查指令判断和标记变量指令的边界
	    - 在x86中，指令的长度范围是1字节-15字节
	    - 验证分支指令
	    - 指令队列也支持macro-op融合单元
		    - 检测两个微指令可以融合进一个单指令中
		- 每个解码周期，不多于5个预解码指令被送到解码器中
		- 两个线程分享接口，并且访问到每个其他的周期
		- 指令解码队列
	- DSB
		- boost
- CPU后端
	- ReOrder buffer(ROB)
		- 处理数据依赖
		- 适配架构可见架构注册器到物理注册器
			- 物理注册器用于
		- ROB也提供注册器重命名和跟踪推测性执行
		- Reservation Station/Scheduler，RS
			- 

## 性能监控单元
- PMU
	- Performance Monitoring Unit
	- 

## 单指令处理器